#! /usr/bin/env sh

run() {
    while read -r cmd arg; do
        if command -v "$cmd" > /dev/null; then
            eval "$cmd" "$arg" &
        fi
    done
}

find "${XDG_CONFIG_HOME:-$HOME/.config}/autostart" \
    -maxdepth 1       \
    -name '*.desktop' \
    -type f           \
    -exec             \
        grep '^Exec=' '{}' \; |
        cut -d= -f2-          |
        run
